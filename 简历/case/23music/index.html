<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			body,
			ul,
			li {
				margin: 0;
				padding: 0;
				list-style: none;
			}
			.bg{
				background:url("bg1.png") no-repeat;
				background-size: 12px 12px;
			}
			.pink{
				background-color:pink;
				opacity: .8;
			}
			.white{
				background-color:#fff;
				opacity: .8;
			}
			#info{
				display: none;
			}
		</style>
		<link rel="stylesheet" type="text/css" href="baidu.css" />
	</head>

	<body onselectstart="return false">
		<div class="wrap">
			<div class="baidu">
				<ul id="list">
					<li>
						<div></div>
						<span>泡沫</span>
						<span>邓紫棋</span>
					</li>
					<li>
						<div></div>
						<span>说爱你</span>
						<span>蔡依林</span>
					</li>
					<li>
						<div></div>
						<span>稻香</span>
						<span>周杰伦</span>
					</li>
					<li>
						<div></div>
						<span>我的梦</span>
						<span>张靓颖</span>
					</li>
					<li>
						<div></div>
						<span>怎么说我不爱你</span>
						<span>萧敬腾</span>
					</li>
					<li>
						<div>️</div>
						<span>无处安放</span>
						<span>白若溪</span>
					</li>
				</ul>
				<div class="select">
					<span class="selectAll"><span>全选</span></span>
					<div class="others">
						<span><em></em>收藏</span>
						<span id="add"><em></em>添加</span>
						<span id="remove"><em></em>删除</span>
					</div>
				</div>
				<div id="info">
					<p>歌曲：<input type="text"  id="song"></p>
					<p>歌手：<input type="text" id="player"></p>
					<input type="button" value="保存" id="ok"/>
					<input type="button" value="取消" id="cancle"/>
				</div>
			</div>
		</div>
		<script src='jquery-3.1.1.js'></script>
		<script>
			/*
				选择器 odd  even    $("div:odd")
				
				find() ,$("p span")==$("p").find("span")

				toggleClass() addClass() removeClass()

				on()  绑定事件



				$("<li>123</li>").html(123)

				append

				remove

				添加和删除要保持隔行变色效果

			*/
			//初始化
			change();
			//封装函数
			function change(){          //封装隔行变色函数
				$("#list li:odd").addClass("pink");
				$("#list li:even").addClass("white");
			}
			function ifEverySelect(){
				var onoff=true;      //全选是否全选，默认全选
				$("#list li").each(function(index,item){
					if(!$(item).hasClass("hover")){     //如果有没选中的，改变onoff为false，否则保持ture
						onoff=false;
					}
				})
				onoff==true?$(".selectAll").addClass("bg"):$(".selectAll").removeClass("bg");  //如果全部选中，全选也选中,否则不选中
			}
			//list点击事件     事件委托法
			$("#list").on("click",function(e){
				if(e.target.nodeName.toLowerCase()==="li"){   //如果点在li身上
					$(e.target).toggleClass("hover").find("div").toggleClass("bg");
				}else{    //点在了li的子孙节点
					$(e.target).parents("li").toggleClass("hover").find("div").toggleClass("bg");
				}
				//判断全选是否勾选
				ifEverySelect();
			})
			//全选点击事件
			$(".selectAll").on("click",function(){
				$(this).toggleClass("bg");
				if($(this).hasClass("bg")){   //如果切换完之后是全选，全选
					$("#list li").addClass("hover").find("div").addClass("bg");
				}else{
					$("#list li").removeClass("hover").find("div").removeClass("bg");
				}
			})
			//添加按钮
			$("#add").on("click",function(){
				if($("#info").css("display")=="none"){   //如果没打开,打开，否则关闭
					$("#info").show();
				}else{
					$("#info").hide();
				}
			})
			//取消按钮
			$("#cancle").on("click",function(){  
				$("#song").val("");
				$("#player").val("");
			});
			//ok按钮
			$("#ok").on("click",function(){
				var song=$("#song").val();
				var player=$("#player").val();
				if(!song){    //如果没写歌名
					alert("请输入歌名");
				}else if(!player){   //如果没写歌手
					alert("请输入歌手");
				}else{    //操纵DOM，push进去一个li
					$("#list").append($(`<li>
					<div></div>
					<span>${song}</span>
					<span>${player}</span>
				</li>`));
				change();
				$("#song").val("");
				$("#player").val("");
				ifEverySelect();
				}
			})
			//删除
			$("#remove").on("click",function(){
				if($("#list .hover").length==0){    //如果没有选中的
					alert("请选中一个");
					return;
				}
				$("#list li").each(function(index,item){
					if($(item).hasClass("hover")){     //如果这是个被选中的,删除这个li
						$(item).remove();
					}
				})
				if($("#list li").length==0){     //如果删光了，改变全选按钮
					$(".selectAll").removeClass("bg");
				}
				change();
			})
			
		</script>
	</body>

</html>